# Add go bin path:
export GOPATH=$HOME/go
export PATH=$PATH:$GOPATH/bin

# Walk
function lk {
  cd "$(walk --icons "$@")"
}

# Editor
export EDITOR=nano

# Docker wrapper function to handle permission issues gracefully
# This helps when docker group hasn't taken effect yet in current session
docker() {
    # Try to run docker command normally first
    if command docker "$@" 2>/dev/null; then
        return 0
    else
        # Check if it's a permission issue
        if command docker "$@" 2>&1 | grep -q "permission denied"; then
            echo "Docker permission denied. Trying with sudo..." >&2
            sudo docker "$@"
            echo "" >&2
            echo "Tip: Run 'newgrp docker' to use Docker without sudo in this session" >&2
            return $?
        else
            # Not a permission issue, run normally to show the actual error
            command docker "$@"
            return $?
        fi
    fi
}

# bun completions
[ -s "$HOME/.bun/_bun" ] && source "$HOME/.bun/_bun"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

fcd() {
  local dir
  dir=$(find ${1:-.} -type d -not -path '*/\.*' 2> /dev/null | fzf +m) && cd "$dir"
}

# pnpm
export PNPM_HOME="$HOME/Library/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
# pnpm end

# Cargo
export PATH="$HOME/.cargo/bin:$PATH"


# Set path if required
#export PATH=$GOPATH/bin:/usr/local/go/bin:$PATH


# Set up the prompt - if you load Theme with zplugin as in this example, this will be overriden by the Theme. If you comment out the Theme in zplugins, this will be loaded.
autoload -Uz promptinit
promptinit
prompt adam1            # see Zsh Prompt Theme below

# Use vi keybindings even if our EDITOR is set to vi
bindkey -e

# Use modern completion system
autoload -Uz compinit
compinit
